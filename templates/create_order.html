{% extends "base.html" %}

{% block title %}Create Group Order - MealMates{% endblock %}

{% block content %}
<div class="create-order-container">
    <h2 class="page-title">Create a Group Order</h2>
    <p class="section-description">Set up a meal order and invite others to join you!</p >

    <form method="POST" action="{{ url_for('create_order') }}" class="order-form">
        <div class="form-group">
            <label for="restaurant">Restaurant</label>
            <input type="text" id="restaurant_id" name="restaurant_id" required placeholder="Enter restaurant name or select from map">
        </div>
        
        <div class="map-container" style="margin-top: 30px;">
            <h3><i class="fas fa-map-marker-alt"></i> Explore Restaurants Nearby</h3>
            <p>Click on markers to view restaurant details and cuisine type</p >
            <iframe src="{{ url_for('static', filename=map_file) }}" width="100%" height="500px" style="border:none;"></iframe>
        </div>

        <div class="form-group">
            <label for="location">Pickup/Delivery Location</label>
            <input type="text" id="delivery_address" name="delivery_address" required placeholder="Where will the food be delivered/picked up?">
        </div>

        <!-- Removed the order_time input field as requested -->
        
        <div class="form-group">
            <label for="duration">How many minutes should the order remain open?</label>
            <input type="number" id="duration" name="duration" min="1" value="30" required>
        </div>        

        <div class="form-group">
            <label for="order_link">Restaurant Menu Link (Optional)</label>
            <input type="url" id="order_link" name="order_link" placeholder="https://restaurant-website.com/menu">
        </div>

        <div class="form-row">
            <div class="form-group half-width">
                <label for="min_people">Minimum People</label>
                <input type="number" id="min_people" name="min_people" min="2" value="2">
            </div>
            <div class="form-group half-width">
                <label for="max_people">Maximum People</label>
                <input type="number" id="max_people" name="max_people" min="2" value="5">
            </div>
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="4" placeholder="Share any details about your order plan, preferences, or requirements"></textarea>
        </div>

        <div class="form-group">
            <label>Payment Collection Methods</label><br>
            <label><input type="checkbox" name="payment_methods" value="cash"> Cash</label><br>
            <label><input type="checkbox" name="payment_methods" value="venmo"> Venmo</label><br>
            <label><input type="checkbox" name="payment_methods" value="paypal"> PayPal</label><br>
            <label><input type="checkbox" name="payment_methods" value="other"> Other</label>
        </div>

        <div class="form-group">
            <label class="checkbox-container">
                <input type="checkbox" id="is_public" name="is_public" checked>
                <span class="checkmark"></span>
                Make this order public (visible to all MealMates users)
            </label>
        </div>

        <div class="button-group">
            <button type="submit" class="primary-button">Create Group</button>
            Cancel
        </div>
    </form>
</div>

<div class="info-box">
    <h3><i class="fas fa-info-circle"></i> How Group Orders Work</h3>
    <ul>
        <li>Create a group order and specify details</li>
        <li>Other users can join your group until it's full</li>
        <li>Coordinate with group members through the chat</li>
        <li>Place the order and collect payments</li>
        <li>Enjoy your meal together!</li>
    </ul>
</div>

<script>
    function setRestaurant(name) {
        document.getElementById('restaurant_id').value = name;
    }
    
    // Set default duration when page loads
    window.onload = function() {
        // Set default duration
        document.getElementById('duration').value = 30;
    }
</script>
    
{% endblock %}