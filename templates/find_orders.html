{% extends "base.html" %}

{% block title %}Find Group Orders - MealMates{% endblock %}

{% block content %}
<div class="find-orders-container">
    <h2 class="page-title">Available Group Orders</h2>

    {% if orders %}
        <ul class="order-list">
            {% for order in orders %}
                <li class="order-item">
                    <h3>{{ order.restaurant.name }}</h3>
                    <p><strong>Created by:</strong> {{ order.creator.username }}</p>
                    <p><strong>Address:</strong> {{ order.restaurant.address }}</p>
                    <p><strong>Deadline:</strong> {{ order.deadline.strftime('%Y-%m-%d %H:%M') }}</p>

                    <!-- Preview ETA Button -->
                    <form method="POST" action="{{ url_for('preview_eta', school_id=order.creator.username) }}">
                        <button type="submit" class="secondary-button">Check ETA to My Address</button>
                    </form>

                    <!-- Join Button -->
                    <a href="{{ url_for('join_order', order_id=order.id) }}" class="primary-button" style="margin-top: 10px;">
                        Join This Order
                    </a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No open group orders at the moment.</p>
    {% endif %}
</div>
{% endblock %}


